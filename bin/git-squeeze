#!/usr/bin/env python
#
# git-squeeze binary
# Copyright (c) Ryan Kadwell <ryan@riaka.ca>
#
# Example squeeze file to demonstrate how it is setup.
#
# To use this command as `git squeeze` you would simply need to add this bin
# folder to your path.
#
# Author: Ryan Kadwell <ryan@riaka.ca>
#

import os
import sys

# dirname = os.path.dirname(os.path.abspath(__file__))
# sys.path.insert(0, os.path.realpath(dirname + "/../gitsqueeze"))

from gitsqueeze import gitsqueeze

# Some dummy handlers
def handle_add(delta, *files):
   print "ADDED  " + files[0]

def handle_remove(delta, *files):
   print "DELETED  " + files[0]

def handle_add_remove(delta, *files):
   print "ADDED or DELETED " + files[0]

def handle_modify(delta, *files):
   print "MODIFIED  " + files[0]

def handle_rename(delta, *files):
   print "RENAMED  " + files[0] + " -> " + files[1]


squeeze = gitsqueeze.GitSqueeze()

# Function will be called when a file addition is detected
squeeze.add_handler(handle_add, gitsqueeze.FILE_ADDED)

# Function will be called when a file addition or deletion is detected.
squeeze.add_handler(handle_add_remove, gitsqueeze.FILE_ADDED | gitsqueeze.FILE_DELETED)

squeeze.add_handler(handle_remove, gitsqueeze.FILE_DELETED)
squeeze.add_handler(handle_modify, gitsqueeze.FILE_MODIFIED)
squeeze.add_handler(handle_rename, gitsqueeze.FILE_RENAMED)

squeeze.run()

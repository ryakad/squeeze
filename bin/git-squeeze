#!/usr/bin/env python
#
# git-squeeze binary
# Copyright (c) Ryan Kadwell <ryan@riaka.ca>
#
# Example squeeze file to demonstrate how it is setup.
#
# To use this command as `git squeeze` you would simply need to add this bin
# folder to your path.
#
# Author: Ryan Kadwell <ryan@riaka.ca>
#

import os
import sys

dirname = os.path.dirname(os.path.abspath(__file__))
sys.path.insert(0, os.path.realpath(dirname + "/../src"))

import gitsqueeze

# Some dummy handlers
def handle_add(filename):
   print "ADDED  " + filename

def handle_remove(filename):
   print "DELETED  " + filename

def handle_add_remove(filename):
   print "ADDED or DELETED " + filename

def handle_modify(filename):
   print "MODIFIED  " + filename

def handle_rename(filename1, filename2):
   print "RENAMED  " + filename1 + " -> " + filename2


squeeze = gitsqueeze.GitSqueeze()

squeeze.add_handler(handle_add, gitsqueeze.FILE_ADDED)
squeeze.add_handler(handle_add_remove, gitsqueeze.FILE_ADDED | gitsqueeze.FILE_DELETED)
squeeze.add_handler(handle_remove, gitsqueeze.FILE_DELETED)
squeeze.add_handler(handle_modify, gitsqueeze.FILE_MODIFIED)
squeeze.add_handler(handle_rename, gitsqueeze.FILE_RENAMED)

squeeze.run()
